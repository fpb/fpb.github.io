const a0_0x649f9a=a0_0x2491;(function(_0x332982,_0x2807df){const _0x6568f3=a0_0x2491,_0x4d1c7c=_0x332982();while(!![]){try{const _0x39b7b5=-parseInt(_0x6568f3(0x1a4))/0x1*(-parseInt(_0x6568f3(0x1a7))/0x2)+parseInt(_0x6568f3(0x196))/0x3*(-parseInt(_0x6568f3(0x1a3))/0x4)+parseInt(_0x6568f3(0x17c))/0x5*(-parseInt(_0x6568f3(0x181))/0x6)+-parseInt(_0x6568f3(0x163))/0x7+-parseInt(_0x6568f3(0x16b))/0x8+-parseInt(_0x6568f3(0x190))/0x9+parseInt(_0x6568f3(0x1b7))/0xa;if(_0x39b7b5===_0x2807df)break;else _0x4d1c7c['push'](_0x4d1c7c['shift']());}catch(_0x10f688){_0x4d1c7c['push'](_0x4d1c7c['shift']());}}}(a0_0x1356,0x4b25b));import{buildProgramFromSources,loadShadersFromURLS,setupWebGL}from'../../../libs/utils.js';import{IFSShape}from'./ifsshape.js';import*as a0_0x2fc5d9 from'./shape_params.js';import*as a0_0x122b8e from'../../helpers.js';import{mat3,translate,rotate,scalem}from'../../../libs/MV.js';var gl,canvas,aspect,ifs_program,draw_program,ifs=null,scale=0x1,offset_x=0x0,offset_y=0x0,scaleNode,offsetNode,pointsNode,iterationsNode,down=![],last_x,last_y;let max_iterations=0x32,points=0x4c4b40;function setup_barnsley_fern(_0x37ad84){const _0x39905e=a0_0x2491;scale=5.5,offset_x=0x0,offset_y=-0x5,add_ifs(a0_0x2fc5d9[_0x39905e(0x1aa)]);}function setup_culcita_fern(_0x448e51){scale=3.1,offset_x=0x0,offset_y=-2.9,add_ifs(a0_0x2fc5d9['culcita_fern']);}function setup_cyclosorus_fern(_0xd95fb9){const _0x2c25a4=a0_0x2491;scale=0x4,offset_x=0x0,offset_y=-3.2,add_ifs(a0_0x2fc5d9[_0x2c25a4(0x1b8)]);}function a0_0x1356(){const _0x5c9db8=['#points','Spiral','offsetX','fishbone_fern','addEventListener','Tree\x201','#scale','spiral','clearColor','innerHeight','sin','20vdRYle','createTextNode','aspect','Cyclosorus\x20fern','querySelector','585792OFtpTS','params','enable','uniform2f','iterations','Culcita\x20fern','clear','all_shapes','shader1.frag','requestAnimationFrame','draw','log','Set\x20max\x20iterations\x20to\x200','push','mousedown','3061008psUaHR','Random\x20IFS','appendChild','reset','random','Increase\x20max\x20iterations','1380phKoMp','wheel','shader1.vert','shader-iterate.vert','nodeValue','new_hue','COLOR_BUFFER_BIT','floor','deltaY','useProgram','toFixed','Dragon','blendFunc','4184GBNjcr','904iaQwtO','setup_keydown_handlers','fill','1344weRpJC','uniform1f','scale','barnsley_fern','shader-iterate.frag','target','#offset','Fishbone\x20fern','Barnsley\x20fern','width','gl-canvas','new_position','dragon','getElementById','ceil','max','17828590HIexln','cyclosorus_fern','Mandelbrot\x20like','offsetY','getUniformLocation','Maple\x20leaf','BLEND','2496676yenGAa','Decrease\x20max\x20iterations','height','map','#iterations','mandelbrot_like','viewport','SRC_ALPHA','4112608zcDDRV','tree_2','maple_leaf','reduce','resize','Random\x20predefined\x20IFS'];a0_0x1356=function(){return _0x5c9db8;};return a0_0x1356();}function setup_fishbone_fern(_0x725e65){const _0x25aefa=a0_0x2491;scale=0x4,offset_x=0x0,offset_y=-3.2,add_ifs(a0_0x2fc5d9[_0x25aefa(0x174)]);}function setup_spiral(_0x2d39ba){const _0x3d117d=a0_0x2491;scale=0x5,offset_x=0x0,offset_y=-4.9,add_ifs(a0_0x2fc5d9[_0x3d117d(0x178)]);}function setup_mandelbrot_like(_0x26e23a){const _0x40b371=a0_0x2491;scale=0.6,offset_x=-0.15,offset_y=0.46,add_ifs(a0_0x2fc5d9[_0x40b371(0x168)]);}function setup_tree_1(_0x2773f6){scale=0x1,offset_x=0x0,offset_y=0x0,add_ifs(a0_0x2fc5d9['tree_1']);}function setup_tree_2(_0x5e77ff){const _0x4320bf=a0_0x2491;scale=0.5,offset_x=0x0,offset_y=-0.444,add_ifs(a0_0x2fc5d9[_0x4320bf(0x16c)]);}function setup_dragon(_0x389149){const _0x15a925=a0_0x2491;scale=5.5,offset_x=-0.5,offset_y=-4.9,add_ifs(a0_0x2fc5d9[_0x15a925(0x1b3)]);}function a0_0x2491(_0x8b5a7a,_0x18d0cc){const _0x13562b=a0_0x1356();return a0_0x2491=function(_0x24919d,_0x490b8d){_0x24919d=_0x24919d-0x15f;let _0x257a18=_0x13562b[_0x24919d];return _0x257a18;},a0_0x2491(_0x8b5a7a,_0x18d0cc);}function setup_maple_leaf(_0x253f50){const _0x38be7a=a0_0x2491;scale=0x4,offset_x=0x0,offset_y=0x0,add_ifs(a0_0x2fc5d9[_0x38be7a(0x16d)]);}function increase_iterations(_0x1c8bb2){max_iterations=Math['min'](max_iterations+0x1,0x64);}function decrease_iterations(_0x54951e){const _0x11affe=a0_0x2491;max_iterations=Math[_0x11affe(0x1b6)](max_iterations-0x1,0x0);if(ifs)ifs['reset']();}function setup_random_predef_ifs(_0x4f61c6){const _0xb8f6b5=a0_0x2491;max_iterations=0x32,ifs[_0xb8f6b5(0x185)]=0x0,ifs['params']=a0_0x2fc5d9[_0xb8f6b5(0x188)][Math[_0xb8f6b5(0x19d)](Math['random']()*a0_0x2fc5d9[_0xb8f6b5(0x188)]['length'])];}function setup_random_ifs(_0x3f0495){const _0x178edb=a0_0x2491;max_iterations=0x32,ifs['iterations']=0x0,ifs[_0x178edb(0x182)]=randomize_shape();}function reset_ifs(_0x27e640){const _0x561319=a0_0x2491;max_iterations=0x0;if(ifs)ifs[_0x561319(0x193)]();}const keydown_handlers={'1':{'handler':setup_barnsley_fern,'msg':a0_0x649f9a(0x1af)},'2':{'handler':setup_culcita_fern,'msg':a0_0x649f9a(0x186)},'3':{'handler':setup_cyclosorus_fern,'msg':a0_0x649f9a(0x17f)},'4':{'handler':setup_fishbone_fern,'msg':a0_0x649f9a(0x1ae)},'5':{'handler':setup_spiral,'msg':a0_0x649f9a(0x172)},'6':{'handler':setup_mandelbrot_like,'msg':a0_0x649f9a(0x1b9)},'7':{'handler':setup_tree_1,'msg':a0_0x649f9a(0x176)},'8':{'handler':setup_tree_2,'msg':'Tree\x202'},'9':{'handler':setup_dragon,'msg':a0_0x649f9a(0x1a1)},'0':{'handler':setup_maple_leaf,'msg':a0_0x649f9a(0x161)},'+':{'handler':increase_iterations,'msg':a0_0x649f9a(0x195)},'-':{'handler':decrease_iterations,'msg':a0_0x649f9a(0x164)},'r':{'handler':setup_random_predef_ifs,'msg':a0_0x649f9a(0x170)},'x':{'handler':setup_random_ifs,'msg':a0_0x649f9a(0x191)},'i':{'handler':reset_ifs,'msg':a0_0x649f9a(0x18d)}};function resize(_0x44e71b){const _0x27c80e=a0_0x649f9a,_0x2b597b=_0x44e71b['innerWidth'],_0x59c400=_0x44e71b[_0x27c80e(0x17a)];canvas[_0x27c80e(0x1b0)]=_0x2b597b,canvas[_0x27c80e(0x165)]=_0x59c400,aspect=canvas[_0x27c80e(0x1b0)]/canvas[_0x27c80e(0x165)],gl[_0x27c80e(0x169)](0x0,0x0,_0x2b597b,_0x59c400);}function setup(_0x38371f){const _0x5a0c17=a0_0x649f9a;canvas=document[_0x5a0c17(0x1b4)](_0x5a0c17(0x1b1)),gl=setupWebGL(canvas,{'alpha':!![]}),ifs_program=buildProgramFromSources(gl,_0x38371f[_0x5a0c17(0x199)],_0x38371f['shader-iterate.frag'],[_0x5a0c17(0x1b2),_0x5a0c17(0x19b)]),draw_program=buildProgramFromSources(gl,_0x38371f['shader1.vert'],_0x38371f[_0x5a0c17(0x189)]),a0_0x122b8e[_0x5a0c17(0x1a5)](window,keydown_handlers),window['addEventListener'](_0x5a0c17(0x16f),_0x1ca44c=>{const _0xa37850=_0x5a0c17;resize(_0x1ca44c[_0xa37850(0x1ac)]);}),window[_0x5a0c17(0x175)](_0x5a0c17(0x197),_0x51a5c9=>{const _0x5d7822=_0x5a0c17;scale*=0x1+_0x51a5c9[_0x5d7822(0x19e)]/0x3e8;}),window[_0x5a0c17(0x175)](_0x5a0c17(0x18f),_0x38994c=>{const _0x155762=_0x5a0c17;last_x=_0x38994c[_0x155762(0x173)],last_y=_0x38994c[_0x155762(0x15f)],down=!![];}),window[_0x5a0c17(0x175)]('mousemove',_0x33d1eb=>{const _0x4af55e=_0x5a0c17;if(!down)return;const _0x40ee14=_0x33d1eb[_0x4af55e(0x173)]-last_x,_0x5a131b=_0x33d1eb[_0x4af55e(0x15f)]-last_y;offset_x+=0x2*aspect*(_0x40ee14/canvas[_0x4af55e(0x1b0)])*scale,offset_y-=0x2*(_0x5a131b/canvas['height'])*scale,last_x=_0x33d1eb[_0x4af55e(0x173)],last_y=_0x33d1eb[_0x4af55e(0x15f)];}),window['addEventListener']('mouseup',_0x55b5cf=>{down=![];}),resize(window),gl[_0x5a0c17(0x179)](0x0,0x0,0x0,0x1),gl[_0x5a0c17(0x183)](gl[_0x5a0c17(0x162)]),gl[_0x5a0c17(0x1a2)](gl[_0x5a0c17(0x16a)],gl['ONE_MINUS_SRC_ALPHA']);var _0x4324ea=document['querySelector'](_0x5a0c17(0x177)),_0x4e36c0=document[_0x5a0c17(0x180)](_0x5a0c17(0x1ad)),_0x40e8a9=document['querySelector'](_0x5a0c17(0x171)),_0x572536=document['querySelector'](_0x5a0c17(0x167));scaleNode=document[_0x5a0c17(0x17d)](''),offsetNode=document[_0x5a0c17(0x17d)](''),pointsNode=document[_0x5a0c17(0x17d)](''),iterationsNode=document[_0x5a0c17(0x17d)](''),_0x4324ea['appendChild'](scaleNode),_0x4e36c0[_0x5a0c17(0x192)](offsetNode),_0x40e8a9[_0x5a0c17(0x192)](pointsNode),_0x572536[_0x5a0c17(0x192)](iterationsNode),window['requestAnimationFrame'](animate);}function getRandomInt(_0x117ccb,_0x237269){const _0x2d06f6=a0_0x649f9a;return _0x117ccb=Math[_0x2d06f6(0x1b5)](_0x117ccb),_0x237269=Math[_0x2d06f6(0x19d)](_0x237269),Math[_0x2d06f6(0x19d)](Math['random']()*(_0x237269-_0x117ccb)+_0x117ccb);}function getRandomFloat(_0x304c27,_0x51e357){const _0x42eb98=a0_0x649f9a;return Math[_0x42eb98(0x194)]()*(_0x51e357-_0x304c27)+_0x304c27;}function getRandomTransform(){const _0x3c2954=a0_0x649f9a,_0x5219f9=getRandomFloat(0x0,0x2*Math['PI']);let _0x4f4363=getRandomFloat(0.5,0x1),_0x379c06=getRandomFloat(0.5,0x1);if(getRandomFloat(0x0,0x1)>0.5)_0x4f4363*=-0x1;if(getRandomFloat(0x0,0x1)>0.5)_0x379c06*=-0x1;const _0x44d93c=getRandomFloat(-0x2,0x2),_0x9b90ba=getRandomFloat(-0x2,0x2),_0x4e2c70=Math['cos'](_0x5219f9),_0x5a0643=Math[_0x3c2954(0x17b)](_0x5219f9),_0x5ddc14=mat3(0x1);return _0x5ddc14[0x0][0x0]=_0x4e2c70*_0x4f4363,_0x5ddc14[0x0][0x1]=-_0x5a0643*_0x379c06,_0x5ddc14[0x1][0x0]=_0x5a0643*_0x4f4363,_0x5ddc14[0x1][0x1]=_0x4e2c70*_0x379c06,_0x5ddc14[0x0][0x2]=_0x44d93c,_0x5ddc14[0x1][0x2]=_0x9b90ba,_0x5ddc14;}function randomize_shape(){const _0x1d97a9=a0_0x649f9a,_0x512d6d={'m':[],'p':[]},_0x193765=getRandomInt(0x2,0x7);let _0xce5b14=Array(_0x193765)[_0x1d97a9(0x1a6)]()[_0x1d97a9(0x166)](()=>Math[_0x1d97a9(0x194)]());const _0xc82646=_0xce5b14[_0x1d97a9(0x16e)]((_0x4c84e9,_0x6f8f1e)=>{return _0x4c84e9+_0x6f8f1e;},0x0);_0xce5b14=_0xce5b14[_0x1d97a9(0x166)](_0x420d00=>_0x420d00/_0xc82646);let _0x18400a=0x0;for(let _0x44a5a5=0x0;_0x44a5a5<_0x193765;_0x44a5a5++){_0x512d6d['m'][_0x1d97a9(0x18e)](getRandomTransform()),_0x18400a+=_0xce5b14[_0x44a5a5],_0x512d6d['p'][_0x1d97a9(0x18e)](_0x18400a);}return console[_0x1d97a9(0x18c)](_0x512d6d),_0x512d6d;}function add_ifs(_0x2dca33){if(ifs)ifs['destroy']();max_iterations=0x32,ifs=new IFSShape(gl,0x1e8480,_0x2dca33);}function animate(_0x1bab8d){const _0x6936d1=a0_0x649f9a;window[_0x6936d1(0x18a)](animate),offsetNode[_0x6936d1(0x19a)]='('+offset_x[_0x6936d1(0x1a0)](0x3)+',\x20'+offset_y[_0x6936d1(0x1a0)](0x3)+')',scaleNode['nodeValue']=scale[_0x6936d1(0x1a0)](0x2),pointsNode[_0x6936d1(0x19a)]=points['toFixed'](0x0),iterationsNode[_0x6936d1(0x19a)]=max_iterations[_0x6936d1(0x1a0)](0x0),gl[_0x6936d1(0x187)](gl[_0x6936d1(0x19c)]),gl[_0x6936d1(0x19f)](draw_program);const _0x3b76cc=gl[_0x6936d1(0x160)](draw_program,_0x6936d1(0x1a9));gl[_0x6936d1(0x1a8)](_0x3b76cc,scale);const _0x57d36e=gl[_0x6936d1(0x160)](draw_program,_0x6936d1(0x17e));gl['uniform1f'](_0x57d36e,canvas['width']/canvas[_0x6936d1(0x165)]);const _0x56ef25=gl[_0x6936d1(0x160)](draw_program,'offset');gl[_0x6936d1(0x184)](_0x56ef25,offset_x,offset_y),ifs&&(ifs[_0x6936d1(0x18b)](draw_program),ifs['iterate'](ifs_program,max_iterations));}loadShadersFromURLS([a0_0x649f9a(0x198),a0_0x649f9a(0x189),a0_0x649f9a(0x1ab),a0_0x649f9a(0x199)])['then'](_0xd6fd23=>setup(_0xd6fd23));