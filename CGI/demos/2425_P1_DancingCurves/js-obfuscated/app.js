const a0_0x401b3e=a0_0x3383;(function(_0xe5d45e,_0xa5d195){const _0x4cd2fc=a0_0x3383,_0x370c67=_0xe5d45e();while(!![]){try{const _0x41ff42=parseInt(_0x4cd2fc(0x19a))/0x1+-parseInt(_0x4cd2fc(0x1a7))/0x2+parseInt(_0x4cd2fc(0x188))/0x3*(-parseInt(_0x4cd2fc(0x189))/0x4)+parseInt(_0x4cd2fc(0x17e))/0x5*(parseInt(_0x4cd2fc(0x173))/0x6)+-parseInt(_0x4cd2fc(0x177))/0x7*(parseInt(_0x4cd2fc(0x1a1))/0x8)+parseInt(_0x4cd2fc(0x184))/0x9*(-parseInt(_0x4cd2fc(0x19e))/0xa)+parseInt(_0x4cd2fc(0x18f))/0xb;if(_0x41ff42===_0xa5d195)break;else _0x370c67['push'](_0x370c67['shift']());}catch(_0x226e48){_0x370c67['push'](_0x370c67['shift']());}}}(a0_0x3f7b,0x1d55e));import{buildProgramFromSources,loadShadersFromURLS,setupWebGL}from'../../../libs/utils.js';function a0_0x3383(_0x46840c,_0x3a120a){const _0x3f7b68=a0_0x3f7b();return a0_0x3383=function(_0x3383f3,_0x223376){_0x3383f3=_0x3383f3-0x16a;let _0x52bf7b=_0x3f7b68[_0x3383f3];return _0x52bf7b;},a0_0x3383(_0x46840c,_0x3a120a);}import{vec2}from'../../../libs/MV.js';import{Curve,B_SPLINE,CATMULL_ROM,BEZIER}from'./curve.js';import*as a0_0x9ee66 from'../../helpers.js';function a0_0x3f7b(){const _0x276af1=['mouseup','BLEND','clearColor','B-Splines','Toggle\x20points\x20display','innerHeight','nodeValue','BÃ©zier','init','127952iGfYlV','draw','appendChild','Dump\x20debug\x20information','10rYGbTe','mousemove','SRC_ALPHA','8FmBYwi','viewport','Decrease\x20speed','max','type','min','105772rqTrYw','getBoundingClientRect','#curves','update','offsetX','addEventListener','setup_keydown_handlers','length','toFixed','getElementById','width','clientX','querySelector','offsetY','add_point','6XwvfYZ','Increase\x20steps\x20per\x20segment','createTextNode','shader1.frag','1342901gzcHNd','target','useProgram','COLOR_BUFFER_BIT','enable','shader1.vert','height','618065sJTOLf','Toggle\x20lines\x20display','log','#steps','Total\x20curves\x20','Finish\x20current\x20curve','326223ntKLqM','Decrease\x20steps\x20per\x20segment','Catmull-Rom','finish','12tEgVce','128584PdSCOF','blendFunc','Editing:\x20','left','requestAnimationFrame','push','3059683qNMrRN','#points'];a0_0x3f7b=function(){return _0x276af1;};return a0_0x3f7b();}let gl,canvas,draw_program,curves=[],curve=null,type=B_SPLINE,pointsNode,curvesNode,stepsNode,speedNode,playing=![],editing=![],tracking=![],moved=![],last_x,last_y,forward=!![],points=0x0,steps=0x5,speed=0x1;const DISPLAY_POINTS=0x1,DISPLAY_LINES=0x2;let display_mode=DISPLAY_POINTS|DISPLAY_LINES,clear_color=!![];function debug_info(){const _0x335a61=a0_0x3383;console[_0x335a61(0x180)](_0x335a61(0x182)+curves[_0x335a61(0x16b)]);for(const _0x501085 of curves){_0x501085['debug']();}console['log'](_0x335a61(0x18b)+editing);}function increase_steps(){const _0x25419d=a0_0x3383;steps=Math[_0x25419d(0x1a6)](steps+0x1,0x32);}function decrease_steps(){const _0x1ed9c9=a0_0x3383;steps=Math[_0x1ed9c9(0x1a4)](steps-0x1,0x1);}function toggle_points(){display_mode^=DISPLAY_POINTS;}function toggle_lines(){display_mode^=DISPLAY_LINES;}function clear(){curves=[],curve=null,editing=![],steps=0x14,points=0x0;}function quicker(){speed*=1.05;}function slower(){speed/=1.05;}function toggle_clear(){clear_color=!clear_color;}function play_pause(){playing=!playing;}function finish_curve(){const _0x4510d3=a0_0x3383;editing=![],curve&&(curve[_0x4510d3(0x187)](),curves[_0x4510d3(0x18e)](curve),curve=null);}function invert_time_direction(){forward=!forward;}function set_bspline(){type=B_SPLINE;}function set_catmull_rom(){type=CATMULL_ROM;}function set_bezier(){type=BEZIER;}const keydown_handlers={'1':{'handler':debug_info,'msg':a0_0x401b3e(0x19d)},'+':{'handler':increase_steps,'msg':a0_0x401b3e(0x174)},'-':{'handler':decrease_steps,'msg':a0_0x401b3e(0x185)},'p':{'handler':toggle_points,'msg':a0_0x401b3e(0x195)},'l':{'handler':toggle_lines,'msg':a0_0x401b3e(0x17f)},'c':{'handler':clear,'msg':'Clear\x20all\x20lines'},'>':{'handler':quicker,'msg':'Increase\x20speed'},'<':{'handler':slower,'msg':a0_0x401b3e(0x1a3)},'x':{'handler':toggle_clear,'msg':'Toggle\x20clear\x20background'},'\x20':{'handler':play_pause,'msg':'play/pause\x20animation'},'z':{'handler':finish_curve,'msg':a0_0x401b3e(0x183)},'s':{'handler':invert_time_direction,'msg':'Invert\x20time'},'1':{'handler':set_bspline,'msg':a0_0x401b3e(0x194)},'2':{'handler':set_catmull_rom,'msg':a0_0x401b3e(0x186)},'3':{'handler':set_bezier,'msg':a0_0x401b3e(0x198)}};function resize(_0x36eca1){const _0x71bf36=a0_0x401b3e,_0x2ccd59=_0x36eca1['innerWidth'],_0x928018=_0x36eca1[_0x71bf36(0x196)];canvas[_0x71bf36(0x16e)]=_0x2ccd59,canvas['height']=_0x928018,gl[_0x71bf36(0x1a2)](0x0,0x0,_0x2ccd59,_0x928018);}function setup(_0x2aa862){const _0x4f8f72=a0_0x401b3e;canvas=document[_0x4f8f72(0x16d)]('gl-canvas'),gl=setupWebGL(canvas,{'alpha':!![],'preserveDrawingBuffer':!![]}),draw_program=buildProgramFromSources(gl,_0x2aa862[_0x4f8f72(0x17c)],_0x2aa862[_0x4f8f72(0x176)]),a0_0x9ee66[_0x4f8f72(0x16a)](window,keydown_handlers),Curve[_0x4f8f72(0x199)](gl,draw_program),gl[_0x4f8f72(0x17b)](gl[_0x4f8f72(0x192)]),gl[_0x4f8f72(0x18a)](gl['SRC_ALPHA'],gl['ONE_MINUS_SRC_ALPHA']),gl['lineWidth'](0x14),window[_0x4f8f72(0x1ac)]('resize',_0x4689e5=>{const _0x46af0a=_0x4f8f72;resize(_0x4689e5[_0x46af0a(0x178)]);}),window[_0x4f8f72(0x1ac)]('wheel',_0x2706e0=>{});function _0x1550d4(_0x1b8901,_0x146209){const _0xd450aa=_0x4f8f72,_0x5184f9=_0x1b8901[_0xd450aa(0x1a8)](),_0x2e7395=(_0x146209[_0xd450aa(0x16f)]-_0x5184f9[_0xd450aa(0x18c)])/_0x1b8901[_0xd450aa(0x16e)]*0x2-0x1,_0x5cac32=-((_0x146209['clientY']-_0x5184f9['top'])/_0x1b8901[_0xd450aa(0x17d)]*0x2-0x1);return vec2(_0x2e7395,_0x5cac32);}window[_0x4f8f72(0x1ac)]('mousedown',_0x4b5db5=>{const _0xf94e1=_0x4f8f72;if(!editing)curve=new Curve();curve[_0xf94e1(0x1a5)]=type,curve[_0xf94e1(0x172)](_0x1550d4(canvas,_0x4b5db5)),points++,editing=!![],tracking=!![],last_x=_0x4b5db5[_0xf94e1(0x1ab)],last_y=_0x4b5db5[_0xf94e1(0x171)];}),window[_0x4f8f72(0x1ac)](_0x4f8f72(0x19f),_0x5c5dc1=>{const _0x3d37e8=_0x4f8f72;if(!tracking)return;const _0x500bb2=_0x5c5dc1[_0x3d37e8(0x1ab)]-last_x,_0x3187aa=_0x5c5dc1[_0x3d37e8(0x171)]-last_y;_0x500bb2*_0x500bb2+_0x3187aa*_0x3187aa>0x64&&(curve[_0x3d37e8(0x172)](_0x1550d4(canvas,_0x5c5dc1)),last_x=_0x5c5dc1['offsetX'],last_y=_0x5c5dc1['offsetY'],points++),moved=!![];}),window[_0x4f8f72(0x1ac)](_0x4f8f72(0x191),_0x17c24a=>{tracking=![],moved&&(moved=![],finish_curve());}),resize(window),gl[_0x4f8f72(0x193)](0x0,0x0,0x0,0x1),gl['enable'](gl[_0x4f8f72(0x192)]),gl['blendFunc'](gl[_0x4f8f72(0x1a0)],gl['ONE_MINUS_SRC_ALPHA']);var _0x9190fd=document['querySelector'](_0x4f8f72(0x190)),_0x11a4bf=document[_0x4f8f72(0x170)](_0x4f8f72(0x1a9)),_0x7832a8=document[_0x4f8f72(0x170)](_0x4f8f72(0x181)),_0xeb9790=document[_0x4f8f72(0x170)]('#speed');pointsNode=document['createTextNode'](''),curvesNode=document[_0x4f8f72(0x175)](''),stepsNode=document[_0x4f8f72(0x175)](''),speedNode=document['createTextNode'](''),_0x9190fd[_0x4f8f72(0x19c)](pointsNode),_0x11a4bf[_0x4f8f72(0x19c)](curvesNode),_0x7832a8['appendChild'](stepsNode),_0xeb9790[_0x4f8f72(0x19c)](speedNode),window[_0x4f8f72(0x18d)](animate);}let start;function animate(_0x4364d6){const _0x51412d=a0_0x401b3e;window[_0x51412d(0x18d)](animate);start===undefined&&(start=_0x4364d6);const _0x1e7692=_0x4364d6-start;pointsNode[_0x51412d(0x197)]=points,stepsNode[_0x51412d(0x197)]=steps,curvesNode[_0x51412d(0x197)]=curves[_0x51412d(0x16b)],speedNode[_0x51412d(0x197)]=speed[_0x51412d(0x16c)](0x4);if(clear_color)gl['clear'](gl[_0x51412d(0x17a)]);gl[_0x51412d(0x179)](draw_program);for(const _0x2fc14d of curves){_0x2fc14d[_0x51412d(0x19b)](gl,draw_program,steps,display_mode);if(playing){let _0x55ab48=speed*_0x1e7692/0x3e8;if(!forward)_0x55ab48*=-0x1;_0x2fc14d[_0x51412d(0x1aa)](_0x55ab48);}}if(curve!=null)curve[_0x51412d(0x19b)](gl,draw_program,steps,display_mode);gl[_0x51412d(0x179)](null),start=_0x4364d6;}loadShadersFromURLS([a0_0x401b3e(0x17c),'shader1.frag'])['then'](_0x15a60a=>setup(_0x15a60a));